<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìò Vokabel√ºbersicht</title>

<style>
:root {
  --blue: #2563eb;
  --blue2: #1d4ed8;
  --bg-light: #f8fafc;
  --text-dark: #1e293b;
  --muted: #9ca3af;
  --ok: #22c55e;
  --bad: #ef4444;
  --shadow: rgba(0,0,0,0.05);
  --card-bg: #ffffff;
  --card-dark: #1e293b;
}

/* ===== Allgemeines Layout ===== */
body {
  margin: 0;
  font-family: "Inter", system-ui, sans-serif;
  background: linear-gradient(145deg, #eef4ff, #dbeafe);
  color: var(--text-dark);
  transition: background 0.3s ease, color 0.3s ease;
}

body.dark {
  background: linear-gradient(145deg, #1e293b, #0f172a);
  color: #f8fafc;
}

.container {
  max-width: 1100px;
  margin: 20px auto;
  padding: 20px;
  background: rgba(255,255,255,0.9);
  border-radius: 18px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  backdrop-filter: blur(10px);
  transition: all 0.4s ease;
}

body.dark .container {
  background: rgba(15,23,42,0.7);
}

/* ===== Header ===== */
h1 {
  font-size: 2rem;
  text-align: center;
  font-weight: 800;
  margin-bottom: 4px;
  color: var(--blue2);
}

body.dark h1 {
  color: #93c5fd;
}

.header-line {
  width: 160px;
  height: 4px;
  background: var(--blue);
  margin: 8px auto 16px;
  border-radius: 4px;
}

.subtitle {
  text-align: center;
  font-size: 1rem;
  color: var(--text-dark);
  font-weight: 600;
}

body.dark .subtitle {
  color: #cbd5e1;
}

/* ===== Toolbar ===== */
.toolbar {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin: 16px 0 22px;
}

.toolbar button,
.toolbar select,
.toolbar input {
  border-radius: 10px;
  border: 1px solid #d1d5db;
  padding: 8px 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

button.primary {
  background: var(--blue);
  color: #fff;
}

button.danger {
  background: var(--bad);
  color: #fff;
}

button.outline {
  background: #fff;
  color: var(--text-dark);
  border: 1px solid #dbe3ff;
}

button.outline.active {
  border-color: var(--blue);
  background: rgba(37,99,235,0.1);
  color: var(--blue2);
}

body.dark .toolbar button.outline {
  background: #0f172a;
  border-color: #334155;
  color: #e5e7eb;
}

input[type="text"] {
  background: #fff;
  border: 1px solid #dbe3ff;
}

body.dark input[type="text"] {
  background: #0f172a;
  color: #e5e7eb;
}

/* ===== Tabelle (Desktop) ===== */
table {
  width: 100%;
  border-collapse: collapse;
  border-radius: 16px;
  overflow: hidden;
  background: var(--card-bg);
  box-shadow: 0 4px 12px var(--shadow);
}

th, td {
  padding: 12px 16px;
  text-align: left;
}

th {
  background: #f1f5ff;
  font-weight: 700;
  color: var(--text-dark);
}

body.dark th {
  background: #1e293b;
  color: #f8fafc;
}

tr:nth-child(even) {
  background: #f9fafb;
}

body.dark tr:nth-child(even) {
  background: rgba(255,255,255,0.03);
}

/* ===== Kategorie-Badges ===== */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 999px;
  background: #e0f2fe;
  color: var(--blue2);
  font-size: 0.9rem;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}

.badge::before {
  content: "‚óè";
  font-size: 0.8rem;
}

body.dark .badge {
  background: rgba(255,255,255,0.1);
  color: #93c5fd;
}

/* ===== Kachel-Layout ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
  gap: 16px;
  margin-top: 18px;
}

.card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  position: relative;
  transition: transform .15s ease, box-shadow .2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0,0,0,0.08);
}

body.dark .card {
  background: rgba(30,41,59,0.9);
  box-shadow: 0 4px 14px rgba(0,0,0,0.4);
}

.card h3 {
  margin: 0;
  font-size: 1.2rem;
  color: var(--text-dark);
}

body.dark .card h3 {
  color: #f8fafc;
}

.card .de {
  margin-top: 4px;
  font-size: 1rem;
  font-weight: 600;
  color: #334155;
}

body.dark .card .de {
  color: #cbd5e1;
}

.edit-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #e2e8f0;
  border: none;
  border-radius: 10px;
  padding: 6px 10px;
  font-weight: 700;
  cursor: pointer;
}

body.dark .edit-btn {
  background: #334155;
  color: #e5e7eb;
}
</style>
</head>
<body>
<div class="container">
  <h1>üìò Vokabel√ºbersicht</h1>
  <div class="header-line"></div>
  <div class="subtitle" id="countInfo">‚Äì</div>
  <!-- ===== Toolbar ===== -->
  <div class="toolbar">
    <select id="filterCategory">
      <option value="Alle">Alle (bunt gemischt)</option>
      <option value="confuse">‚ö†Ô∏è Verwechslungsgefahr</option>
    </select>

    <input type="text" id="searchInput" placeholder="Suchen ‚Ä¶">

    <button id="btnReset" class="outline">Reset</button>
    <button id="btnNew" class="primary">+ Neue</button>
    <button id="btnDelete" class="danger" style="display:none;">L√∂schen</button>
    <button id="btnSync" class="outline" style="max-width:180px;">üìÑ Sync</button>
  </div>

  <!-- ===== Ansichtsschalter ===== -->
  <div class="toolbar">
    <button id="btnList" class="outline active">üìã Liste</button>
    <button id="btnCards" class="outline">üß© Kacheln</button>
    <button id="btnDark" class="outline">üåô Dark Mode</button>
  </div>

  <!-- ===== Anzeige Statistik ===== -->
  <div class="subtitle" style="margin-bottom:12px;">
    <b id="vocabCount">‚Äì</b> Vokabeln gefunden
  </div>

  <!-- ===== Tabellen-Container (Listenansicht) ===== -->
  <div id="tableContainer">
    <table id="vocabTable">
      <thead>
        <tr>
          <th><input type="checkbox" id="selectAll" disabled></th>
          <th>Englisch</th>
          <th>Deutsch</th>
          <th>Kategorie</th>
          <th>Aktion</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <!-- ===== Grid-Container (Kachelansicht) ===== -->
  <div id="gridContainer" class="grid" style="display:none;"></div>
</div>

<!-- ===== Modal f√ºr Bearbeiten/Anlegen ===== -->
<div id="editModal"
     style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.55);
            align-items:center;justify-content:center;z-index:50;">
  <div style="background:#fff;color:#111;border-radius:16px;
              width:min(400px,90vw);padding:20px;
              box-shadow:0 6px 30px rgba(0,0,0,0.25);">
    <h2 id="modalTitle" style="margin-top:0;">Vokabel bearbeiten</h2>
    <div style="display:flex;flex-direction:column;gap:10px;">
      <label>Englisch <input type="text" id="editEN"></label>
      <label>Deutsch <input type="text" id="editDE"></label>
      <label>Kategorie <select id="editCat"></select></label>
      <label class="toggle">
        <span>‚ö†Ô∏è Verwechslungsgefahr</span>
        <input type="checkbox" id="editConfuse">
      </label>
    </div>

    <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:18px;">
      <button id="btnCancel" class="outline">Abbrechen</button>
      <button id="btnSave" class="primary">Speichern</button>
    </div>
  </div>
</div>

<script>
(() => {
'use strict';

/* ==================== Setup & Variablen ==================== */
const tableBody = document.getElementById('tableBody');
const gridContainer = document.getElementById('gridContainer');
const filterCategory = document.getElementById('filterCategory');
const searchInput = document.getElementById('searchInput');
const selectAll = document.getElementById('selectAll');
const btnReset = document.getElementById('btnReset');
const btnNew = document.getElementById('btnNew');
const btnDelete = document.getElementById('btnDelete');
const btnSync = document.getElementById('btnSync');
const btnList = document.getElementById('btnList');
const btnCards = document.getElementById('btnCards');
const btnDark = document.getElementById('btnDark');
const countInfo = document.getElementById('vocabCount');

/* ==================== Kategorien ==================== */
const CATS = {
  Gelb:{label:'Grundwerkzeuge Metallverarbeitung',color:'#F4D03F',text:'#000'},
  Pink:{label:'Werkzeugkasten Mechaniker',color:'#E91E63',text:'#fff'},
  Blau:{label:'Blech- / Kunststoffarbeiten',color:'#1976D2',text:'#fff'},
  Gruen:{label:'Drehen / Fr√§sen',color:'#1E8449',text:'#fff'},
  HellesPink:{label:'Hydraulik / Pneumatik',color:'#F54927',text:'#fff'},
  Orange:{label:'Elektrotechnik',color:'#E67E22',text:'#fff'},
  Dunkelgruen:{label:'Flugger√§temechanik allgemein',color:'#117A65',text:'#fff'}
};

/* ==================== Beispieldaten (Demo) ==================== */
let data = [
  {en:'hammer',de:'Hammer',cat:'Gelb',confuse:false},
  {en:'screwdriver',de:'Schraubendreher',cat:'Gelb',confuse:false},
  {en:'pliers',de:'Zange',cat:'Gelb',confuse:true},
  {en:'drill',de:'Bohrmaschine',cat:'Orange',confuse:false},
  {en:'lathe',de:'Drehmaschine',cat:'Gruen',confuse:false},
  {en:'sheet metal',de:'Blech',cat:'Blau',confuse:false},
  {en:'valve',de:'Ventil',cat:'HellesPink',confuse:true},
  {en:'assemble',de:'montieren',cat:'Pink',confuse:false},
  {en:'inspect',de:'pr√ºfen',cat:'Dunkelgruen',confuse:true}
];

/* ==================== Zustand ==================== */
let viewMode = 'list';  // list | cards
let darkMode = false;
let editIndex = null;
let editMode = false;  // ‚ÄûAnpassen‚Äú aktiv ja/nein
const perPage = 15;
let currentPage = 1;

/* ==================== Dropdowns bef√ºllen ==================== */
function populateCategoryFilter(){
  const keep = new Set(['Alle','confuse']);
  [...filterCategory.options].forEach(o=>{if(!keep.has(o.value))o.remove();});
  Object.keys(CATS).forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k; opt.textContent=CATS[k].label;
    opt.style.background=CATS[k].color;
    opt.style.color=CATS[k].text;
    filterCategory.appendChild(opt);
  });
}

function populateEditCategorySelect(){
  const sel = document.getElementById('editCat');
  sel.innerHTML = '';
  Object.keys(CATS).forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k;opt.textContent=CATS[k].label;
    opt.style.background=CATS[k].color;
    opt.style.color=CATS[k].text;
    sel.appendChild(opt);
  });
}

/* Hilfs-Badge f√ºr Kategorie */
function categoryBadge(key){
  const c=CATS[key] || {label:key,color:'#e5e7eb',text:'#111'};
  const span=document.createElement('span');
  span.className='badge';
  span.textContent=c.label;
  span.style.background=c.color;
  span.style.color=c.text;
  return span;
}

/* ‚ö†Ô∏è Icon f√ºr Verwechslungsgefahr */
function confuseIcon(flag){
  if(!flag)return '';
  return '<span title="Verwechslungsgefahr">‚ö†Ô∏è</span>';
}

/* Filter & Suche anwenden */
function getFilteredData(){
  const catVal = filterCategory.value;
  const isConf = catVal==='confuse';
  const q = searchInput.value.trim().toLowerCase();
  return data.filter(v=>{
    const matchCat = isConf ? v.confuse : (catVal==='Alle' ? true : v.cat===catVal);
    const matchQ = !q || v.en.toLowerCase().includes(q) || v.de.toLowerCase().includes(q);
    return matchCat && matchQ;
  });
}
/* ==================== Rendering ==================== */

// Rendert die Tabellenansicht (Desktop-/Listenmodus)
function renderTable(){
  const filtered = getFilteredData();
  const totalPages = Math.max(1, Math.ceil(filtered.length / perPage));
  if (currentPage > totalPages) currentPage = totalPages;
  const start = (currentPage - 1) * perPage;
  const pageData = filtered.slice(start, start + perPage);

  tableBody.innerHTML = '';
  pageData.forEach((v,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td><input type="checkbox" data-idx="${i}"></td>
      <td>${v.en} ${v.confuse?confuseIcon(true):''}</td>
      <td>${v.de}</td>
      <td>${categoryBadge(v.cat).outerHTML}</td>
      <td><button class="btnEdit" data-edit="${i}">‚úèÔ∏è Bearbeiten</button></td>`;
    tableBody.appendChild(tr);
  });

  // Klick-Events f√ºr Bearbeiten
  document.querySelectorAll('.btnEdit').forEach(btn=>{
    btn.onclick=()=>openEdit(start+Number(btn.dataset.edit));
  });

  countInfo.textContent = `${filtered.length}`;
  renderPagination(totalPages);
}

// Rendert die Karten-/Kachelansicht (2-spaltig responsiv)
function renderCards(){
  const filtered = getFilteredData();
  const totalPages = Math.max(1, Math.ceil(filtered.length / perPage));
  if (currentPage > totalPages) currentPage = totalPages;
  const start = (currentPage - 1) * perPage;
  const pageData = filtered.slice(start, start + perPage);

  gridContainer.innerHTML='';
  pageData.forEach((v,i)=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="cardTitle">${v.en} ${v.confuse?confuseIcon(true):''}</div>
      <div class="cardSub">DE: ${v.de}</div>
      <div class="cardCat">${categoryBadge(v.cat).outerHTML}</div>
      <div class="cardRow">
        <button class="btnEdit" data-edit="${i}">Bearbeiten</button>
      </div>`;
    gridContainer.appendChild(card);
  });

  document.querySelectorAll('.btnEdit').forEach(btn=>{
    btn.onclick=()=>openEdit(start+Number(btn.dataset.edit));
  });

  countInfo.textContent = `${filtered.length}`;
  renderPagination(totalPages);
}

// Pagination-Buttons
function renderPagination(totalPages){
  const existing=document.getElementById('pagination');
  if(existing)existing.remove();
  const nav=document.createElement('div');
  nav.id='pagination';
  nav.style.textAlign='center';
  nav.style.margin='16px 0';
  nav.innerHTML=`
    <button class="outline" id="btnPrev" ${currentPage===1?'disabled':''}>‚¨ÖÔ∏è Zur√ºck</button>
    <span style="margin:0 10px;font-weight:600;">Seite ${currentPage} / ${totalPages}</span>
    <button class="outline" id="btnNext" ${currentPage===totalPages?'disabled':''}>Weiter ‚û°Ô∏è</button>`;
  (viewMode==='list'?tableBody.parentElement:gridContainer).after(nav);
  document.getElementById('btnPrev').onclick=()=>{currentPage--;render();};
  document.getElementById('btnNext').onclick=()=>{currentPage++;render();};
}

/* ==================== Modal-Funktionen ==================== */

function openEdit(idx){
  editIndex=idx;
  const v=data[idx];
  document.getElementById('modalTitle').textContent='Vokabel bearbeiten';
  document.getElementById('editEN').value=v.en;
  document.getElementById('editDE').value=v.de;
  document.getElementById('editCat').value=v.cat;
  document.getElementById('editConfuse').checked=!!v.confuse;
  document.getElementById('editModal').style.display='flex';
}

function closeModal(){
  document.getElementById('editModal').style.display='none';
}

// Speichern im Modal
document.getElementById('btnSave').onclick=()=>{
  const en=document.getElementById('editEN').value.trim();
  const de=document.getElementById('editDE').value.trim();
  const cat=document.getElementById('editCat').value;
  const confuse=document.getElementById('editConfuse').checked;
  if(!en||!de){alert('Bitte Englisch & Deutsch ausf√ºllen.');return;}
  if(editIndex==null){data.push({en,de,cat,confuse});}
  else{data[editIndex]={en,de,cat,confuse};}
  closeModal();
  render();
};

document.getElementById('btnCancel').onclick=closeModal;

/* ==================== Ansicht-Umschaltung ==================== */

function render(){
  if(viewMode==='list'){
    gridContainer.style.display='none';
    document.getElementById('tableContainer').style.display='block';
    renderTable();
  }else{
    gridContainer.style.display='grid';
    document.getElementById('tableContainer').style.display='none';
    renderCards();
  }
}

/* ==================== Event-Handling ==================== */

// Filter / Suche
filterCategory.onchange=()=>{currentPage=1;render();};
searchInput.oninput=()=>{currentPage=1;render();};

// Reset-Button
btnReset.onclick=()=>{
  filterCategory.value='Alle';
  searchInput.value='';
  currentPage=1;
  render();
};

// Neue Vokabel
btnNew.onclick=()=>{
  editIndex=null;
  document.getElementById('modalTitle').textContent='Neue Vokabel';
  document.getElementById('editEN').value='';
  document.getElementById('editDE').value='';
  document.getElementById('editCat').value=Object.keys(CATS)[0];
  document.getElementById('editConfuse').checked=false;
  document.getElementById('editModal').style.display='flex';
};

// L√∂schen
btnDelete.onclick=()=>{
  const checked=[...document.querySelectorAll('#vocabTable tbody input[type=checkbox]:checked')];
  if(!checked.length){alert('Keine Auswahl zum L√∂schen.');return;}
  if(!confirm(`${checked.length} Vokabel(n) l√∂schen?`))return;
  const indexes=checked.map(x=>Number(x.dataset.idx));
  data=data.filter((_,i)=>!indexes.includes(i));
  render();
};

// Ansichtsschalter
btnList.onclick=()=>{viewMode='list';btnList.classList.add('active');btnCards.classList.remove('active');render();};
btnCards.onclick=()=>{viewMode='cards';btnCards.classList.add('active');btnList.classList.remove('active');render();};

// Dark-Mode
btnDark.onclick=()=>{
  darkMode=!darkMode;
  document.body.classList.toggle('dark',darkMode);
};
/* ==================== Initialisierung ==================== */
populateCategoryFilter();
populateEditCategorySelect();
render();

/* ==================== Dark Mode Styles ==================== */
const style=document.createElement('style');
style.textContent=`
body.dark{
  background:#0f172a;
  color:#f9fafb;
  transition:background .3s,color .3s;
}
body.dark input, body.dark select, body.dark button{
  background:#1e293b;
  color:#f9fafb;
  border-color:#334155;
}
body.dark table{
  background:#1e293b;
  color:#f9fafb;
}
body.dark .badge{
  border:1px solid rgba(255,255,255,0.1);
}
body.dark .card{
  background:#1e293b;
  color:#f9fafb;
  border-color:#334155;
}
`;
document.head.appendChild(style);

/* ==================== Responsiveness ==================== */
// Kachel-Layout 2-spaltig auf Desktop, 1-spaltig auf Handy
const gridStyle=document.createElement('style');
gridStyle.textContent=`
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:16px;
}
.card{
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:14px;
  padding:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
  transition:transform .2s,box-shadow .2s;
}
.card:hover{
  transform:translateY(-3px);
  box-shadow:0 6px 18px rgba(0,0,0,.1);
}
.cardTitle{
  font-weight:700;
  font-size:1.1rem;
  margin-bottom:4px;
}
.cardSub{
  color:#6b7280;
  margin-bottom:8px;
}
.cardCat .badge{
  font-size:.9rem;
  padding:4px 10px;
  border-radius:999px;
  display:inline-block;
}
.cardRow{
  text-align:right;
}
.badge{
  display:inline-block;
  padding:4px 8px;
  border-radius:999px;
  font-weight:600;
  font-size:.85rem;
}
.toggle{
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-weight:600;
}
.toolbar{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:10px;
}
.toolbar select,
.toolbar input{
  padding:8px 10px;
  border:1px solid #cfd6e4;
  border-radius:10px;
}
.toolbar button{
  padding:8px 12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}
.toolbar button.primary{background:#2563eb;color:#fff;}
.toolbar button.outline{background:#fff;border:1px solid #cfd6e4;color:#111;}
.toolbar button.danger{background:#ef4444;color:#fff;}
.toolbar button.active{background:#2563eb;color:#fff;}
table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,.05);
}
th,td{
  padding:10px;
  border-bottom:1px solid #e5e7eb;
  text-align:left;
}
tr:hover td{
  background:#f9fafb;
}
@media(max-width:700px){
  table, thead, tbody, th, td, tr{
    display:block;
  }
  th{display:none;}
  td{
    padding:8px;
    border:none;
    border-bottom:1px solid #e5e7eb;
  }
}
`;
document.head.appendChild(gridStyle);

})(); // end IIFE
</script>
</body>
</html>
