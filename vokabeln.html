<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vokabel√ºbersicht</title>
<style>
body{font-family:sans-serif;background:#f7f9fb;margin:0;padding:20px;color:#222;}
.app{max-width:1100px;margin:auto;}
h1{text-align:center;margin-bottom:20px;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{padding:8px 10px;border-bottom:1px solid #ddd;text-align:left;}
th{background:#eef3ff;}
tr:hover{background:#f6f9ff;}
button,input,select{font-size:1rem;padding:7px 10px;border-radius:6px;border:1px solid #ccc;margin:3px;}
button{cursor:pointer;background:#2980b9;color:#fff;border:none;transition:background .2s ease,transform .1s ease;}
button:hover{background:#3498db;transform:translateY(-1px);}
.section{background:#fff;padding:15px 20px;border-radius:14px;box-shadow:0 2px 6px rgba(0,0,0,0.06);margin-bottom:25px;}
.section h2{text-align:center;margin:0 0 10px;font-size:1.2rem;}
.flex{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center;}
input[type="text"]{flex:1 1 160px;}
hr{border:0;border-top:1px solid #ddd;margin:20px 0;}
.footer{text-align:center;font-size:0.95rem;color:#555;margin-top:15px;}
#modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:none;align-items:center;justify-content:center;}
#modalContent{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.2);min-width:300px;}
#modalContent h3{margin-top:0;}
.catOpt{color:#fff;}
#infoFooter{margin-top:5px;font-size:0.9rem;text-align:center;color:#555;}
#lastAdded{background:#f8fafc;padding:10px;border-radius:10px;margin-top:8px;text-align:center;}
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#2ecc71;color:#fff;padding:10px 18px;border-radius:10px;font-size:1rem;display:none;z-index:1000;box-shadow:0 2px 6px rgba(0,0,0,0.2);}
</style>
</head>
<body>
<div class="app">
<h1>üìò Vokabel√ºbersicht</h1>

<div class="section">
  <h2>üîç Filter & Suche</h2>
  <div class="flex">
    <label>Kategorie:
      <select id="filterCat">
        <option value="Alle">Alle (bunt gemischt)</option>
      </select>
    </label>
    <input type="text" id="searchInput" placeholder="üîé Suchen (EN / DE / Gruppe / Hinweis)">
    <button id="resetFilter">üîÑ Filter zur√ºcksetzen</button>
  </div>
</div>

<div class="section">
  <h2>üìÑ Vokabelliste</h2>
  <table id="vokabelTable">
    <thead>
      <tr><th>Englisch</th><th>Deutsch</th><th>Kategorie</th><th>Gruppe / Variante</th><th>Hinweis</th><th>Aktion</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div id="pagination" class="flex" style="margin-top:10px;"></div>
  <div id="infoFooter"></div>
</div>

<div class="section">
  <h2>‚ûï Neue Vokabel hinzuf√ºgen</h2>
  <div class="flex">
    <input type="text" id="en" placeholder="Englisch">
    <input type="text" id="de" placeholder="Deutsch">
    <select id="cat"></select>
    <input type="text" id="group" placeholder="Gruppe / Variante">
    <input type="text" id="hint" placeholder="Hinweis">
    <button id="addBtn">Hinzuf√ºgen</button>
  </div>
</div>

<hr>

<div class="section">
  <h2>üíæ Datei- & JSON-Verwaltung</h2>
  <div class="flex">
    <button id="exportBtn">üì§ Exportieren</button>
    <button id="importBtn">üì• Importieren</button>
    <button id="downloadJson">üßæ vokabeln.json herunterladen</button>
  </div>
</div>

<hr>

<div class="section">
  <h2>üßæ Zuletzt hinzugef√ºgt</h2>
  <div id="lastAdded">Keine Vokabeln vorhanden.</div>
</div>

<div class="footer">
  <button onclick="location.href='index.html'">‚¨ÖÔ∏è Zur√ºck zum Trainer</button>
  <p>¬© 2025 @Beefi</p>
</div>
</div>

<div id="modal">
  <div id="modalContent">
    <h3>‚úèÔ∏è Vokabel bearbeiten</h3>
    <input type="text" id="editEn" placeholder="Englisch"><br><br>
    <input type="text" id="editDe" placeholder="Deutsch"><br><br>
    <select id="editCat"></select><br><br>
    <input type="text" id="editGroup" placeholder="Gruppe / Variante"><br><br>
    <input type="text" id="editHint" placeholder="Hinweis"><br><br>
    <div class="flex">
      <button id="saveEdit">üíæ Speichern</button>
      <button id="cancelEdit">‚ùå Abbrechen</button>
    </div>
  </div>
</div>

<div id="toast" class="toast">Gespeichert</div>

<script>
(()=>{
const CATEGORY_NAMES={"Gelb":"Grundwerkzeuge Metallverarbeitung","Pink":"Werkzeugkasten Mechaniker","Blau":"Blech- / Kunststoffarbeiten","Gruen":"Drehen / Fr√§sen","HellesPink":"Hydraulik / Pneumatik","Orange":"Elektrotechnik","Dunkelgruen":"Flugger√§temechanik allgemein","Rot":"Verwechslungsgefahr"};
const COLOR_MAP={"Gelb":"#F4D03F","Pink":"#E91E63","Blau":"#1976D2","Gruen":"#1E8449","HellesPink":"#F54927","Orange":"#E67E22","Dunkelgruen":"#117A65","Rot":"#C0392B"};
let list=JSON.parse(localStorage.getItem("vokabeln")||"[]");
const perPage=15;let currentPage=1;let editIndex=null;
const $=s=>document.querySelector(s);const $$=s=>document.querySelectorAll(s);

function toast(msg,color="#2ecc71"){
  const t=$("#toast");t.textContent=msg;t.style.background=color;t.style.display="block";
  setTimeout(()=>t.style.display="none",1500);
}

function saveLocal(){
  localStorage.setItem("vokabeln",JSON.stringify(list));
  localStorage.setItem("vokabeln_updated",new Date().toISOString());
  render();
}

function fillCats(sel){
  sel.innerHTML="";
  for(const k in CATEGORY_NAMES){
    const opt=document.createElement("option");
    opt.value=k;opt.textContent=CATEGORY_NAMES[k];
    opt.style.background=COLOR_MAP[k];
    opt.style.color="#fff";sel.appendChild(opt);
  }
}
fillCats($("#cat"));fillCats($("#editCat"));
const filterCat=$("#filterCat");
for(const k in CATEGORY_NAMES){
  const o=document.createElement("option");
  o.value=k;o.textContent=CATEGORY_NAMES[k];
  o.style.background=COLOR_MAP[k];o.style.color="#fff";
  filterCat.appendChild(o);
}

function render(){
  const tb=$("#vokabelTable tbody");
  if(!list.length){tb.innerHTML="<tr><td colspan='6' style='text-align:center;'>Keine Vokabeln vorhanden.</td></tr>";return;}
  const search=$("#searchInput").value.toLowerCase();
  const cat=$("#filterCat").value;
  let all=list.filter(v=>{
    const matchCat=(cat==="Alle"||v[2]===cat);
    const matchSearch=(v[0].toLowerCase().includes(search)||v[1].toLowerCase().includes(search)||(v[3]||"").toLowerCase().includes(search)||(v[4]||"").toLowerCase().includes(search));
    return matchCat&&matchSearch;
  });
  const pages=Math.ceil(all.length/perPage);
  if(currentPage>pages)currentPage=pages||1;
  const start=(currentPage-1)*perPage;
  const rows=all.slice(start,start+perPage);
  tb.innerHTML=rows.map((v,i)=>`
    <tr>
      <td>${v[0]}</td>
      <td>${v[1]}</td>
      <td><span style="background:${COLOR_MAP[v[2]]};color:#fff;padding:2px 8px;border-radius:8px;">${CATEGORY_NAMES[v[2]]}</span></td>
      <td>${v[3]||""}</td>
      <td>${v[4]||""}</td>
      <td>
        <button class="editBtn" data-idx="${start+i}">‚úèÔ∏è</button>
        <button class="delBtn" data-idx="${start+i}">üóëÔ∏è</button>
      </td>
    </tr>`).join("");

  const pag=$("#pagination");pag.innerHTML="";
  for(let i=1;i<=pages;i++){
    const b=document.createElement("button");
    b.textContent=i;if(i===currentPage)b.style.background="#6ca0f8";
    b.onclick=()=>{currentPage=i;render();};
    pag.appendChild(b);
  }
  const upd=localStorage.getItem("vokabeln_updated");
  $("#infoFooter").textContent=`üìÖ Letzte √Ñnderung: ${upd?new Date(upd).toLocaleString("de-DE"):"‚Äì"} | üìö Gesamt: ${list.length} | üîé Gefunden: ${all.length} | üî§ Angezeigt: ${rows.length} | üìÑ Seite ${currentPage}/${pages||1}`;
  renderLastAdded();

  $$(".editBtn").forEach(b=>b.onclick=()=>openEdit(b.dataset.idx));
  $$(".delBtn").forEach(b=>b.onclick=()=>{if(confirm("L√∂schen?")){list.splice(b.dataset.idx,1);saveLocal();toast("üóëÔ∏è Gel√∂scht","#e74c3c");}});
}

function renderLastAdded(){
  const div=$("#lastAdded");
  if(!list.length){div.textContent="Keine Vokabeln vorhanden.";return;}
  const last=list.slice(-5).reverse();
  div.innerHTML=last.map(v=>`<div><b>${v[0]}</b> ‚Äì ${v[1]} <span style="color:${COLOR_MAP[v[2]]}">(${CATEGORY_NAMES[v[2]]})</span></div>`).join("");
}

function openEdit(i){
  editIndex=i;
  const v=list[i];
  $("#editEn").value=v[0];$("#editDe").value=v[1];$("#editCat").value=v[2];
  $("#editGroup").value=v[3]||"";$("#editHint").value=v[4]||"";
  $("#modal").style.display="flex";
}

$("#saveEdit").onclick=()=>{
  const v=list[editIndex];
  v[0]=$("#editEn").value.trim();v[1]=$("#editDe").value.trim();
  v[2]=$("#editCat").value;v[3]=$("#editGroup").value.trim();v[4]=$("#editHint").value.trim();
  saveLocal();toast("üíæ √Ñnderungen gespeichert");
  $("#modal").style.display="none";
};
$("#cancelEdit").onclick=()=>$("#modal").style.display="none";

$("#addBtn").onclick=()=>{
  const en=$("#en").value.trim(),de=$("#de").value.trim(),cat=$("#cat").value,grp=$("#group").value.trim(),hint=$("#hint").value.trim();
  if(!en||!de||!cat)return alert("Bitte alle Pflichtfelder ausf√ºllen!");
  list.push([en,de,cat,grp,hint]);saveLocal();
  $("#en").value=$("#de").value=$("#group").value=$("#hint").value="";
  toast("‚ûï Hinzugef√ºgt");
};

$("#resetFilter").onclick=()=>{$("#filterCat").value="Alle";$("#searchInput").value="";render();};
$("#exportBtn").onclick=()=>{const blob=new Blob([JSON.stringify(list,null,2)],{type:"application/json"});const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="vokabeln_export.json";a.click();toast("üì§ Exportiert");};
$("#importBtn").onclick=()=>{const i=document.createElement("input");i.type="file";i.accept=".json";i.onchange=e=>{const f=e.target.files[0];const r=new FileReader();r.onload=()=>{try{const d=JSON.parse(r.result);if(Array.isArray(d)){list=d;saveLocal();toast("üì• Importiert");}}catch{alert("Ung√ºltige Datei!");}};r.readAsText(f);};i.click();};
$("#downloadJson").onclick=()=>{const blob=new Blob([JSON.stringify(list,null,2)],{type:"application/json"});const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="vokabeln.json";a.click();toast("üíæ vokabeln.json gespeichert");};

render();
})();
</script>
</body>
</html>
