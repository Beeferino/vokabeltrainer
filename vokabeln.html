<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üìò Vokabel√ºbersicht ‚Äì Beeferino</title>
<style>
:root{
  --blue:#2563eb;--blue2:#1d4ed8;
  --ok:#22c55e;--bad:#ef4444;--muted:#9ca3af;
  --ink:#0f172a;--glass:rgba(255,255,255,.9)
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,system-ui,sans-serif;background:#f7f9fb;color:var(--ink)}
.app{max-width:1100px;margin:20px auto;background:#fff;border-radius:18px;box-shadow:0 2px 10px rgba(0,0,0,.08);padding:20px}
h1{text-align:center;font-size:1.9rem;margin-bottom:10px}
.flex{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
input,select,button{padding:8px 10px;border-radius:10px;font-size:1rem}
button{background:var(--blue);color:#fff;border:none;cursor:pointer;transition:.2s}
button:hover{background:var(--blue2)}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:10px;border-bottom:1px solid #e2e8f0;text-align:left}
th{background:#eef4ff;cursor:pointer}
th.sort-asc::after{content:" ‚Üë";color:#888}
th.sort-desc::after{content:" ‚Üì";color:#888}
tr:hover{background:#f9fbff}
.category-chip{border-radius:999px;padding:4px 10px;color:#fff;font-size:.9rem}
.actions button{margin-right:4px}
footer{text-align:center;margin-top:20px;color:#555;font-size:.9rem}
.linkbtn{display:inline-block;background:#eaf0ff;border:1px solid #dbe3ff;padding:10px 16px;border-radius:12px;text-decoration:none;color:#1f2937;font-weight:700}
.divider{margin:24px 0;border-top:3px solid #e5ebf3}

/* zuletzt hinzugef√ºgt */
#lastAddedBox{overflow:hidden;max-height:0;transition:max-height .4s ease,opacity .4s ease;opacity:0}
#lastAddedBox.open{max-height:600px;opacity:1}
h2{font-size:1.2rem;text-align:center;margin-top:16px;cursor:pointer;color:#1e3a8a}
h2 span.arrow{margin-left:6px;transition:transform .3s ease}
h2.collapsed span.arrow{transform:rotate(-90deg)}
#lastAdded{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:10px}
.recent-item{padding:10px 14px;border-radius:12px;font-weight:600;color:#fff;box-shadow:0 3px 10px rgba(0,0,0,.1)}
.recent-item small{display:block;font-size:.85rem;opacity:.85;margin-top:4px}

/* mobile view */
@media(max-width:768px){
  .desk-only{display:none}
  .mobi-only{display:block}
  body{background:linear-gradient(145deg,#eef4ff,#dbeafe)}
  .app{background:transparent;box-shadow:none;padding:10px}
  .mobi-wrap{background:var(--glass);border-radius:20px;padding:14px;box-shadow:0 8px 28px rgba(0,0,0,.08);backdrop-filter:blur(8px)}
  .mobi-head{display:flex;justify-content:space-between;align-items:center}
  .mobi-title{font-weight:800;font-size:1.3rem;color:#1e3a8a}
  .mobi-list{display:grid;gap:10px;margin-top:10px}
  .mobi-card{border-radius:14px;background:#fff;box-shadow:0 4px 14px rgba(0,0,0,.08);padding:12px;text-align:left}
  .mobi-en{font-weight:800;font-size:1.05rem}
  .mobi-de{color:#111;margin-top:2px}
  .mobi-tag{margin-top:6px;display:inline-block;padding:4px 10px;border-radius:999px;color:#fff;font-size:.85rem}
  .mobi-actions{position:fixed;right:14px;bottom:14px;display:flex;flex-direction:column;gap:10px;z-index:99}
  .fab{width:54px;height:54px;border-radius:999px;display:flex;align-items:center;justify-content:center;background:#1e6ed8;color:#fff;font-size:1.3rem;box-shadow:0 10px 20px rgba(30,110,216,.35);border:none}
  .fab:active{transform:scale(.96)}
}
</style>
</head>
<body>
<div class="app">
  <!-- DESKTOP -->
  <div class="desk-only">
    <h1>üìò Vokabel√ºbersicht</h1>

    <div class="flex">
      <label>Kategorie:
        <select id="filterCat"><option value="Alle">Alle</option></select>
      </label>
      <input id="searchInput" type="text" placeholder="üîç Suche...">
      <button id="resetFilter">Zur√ºcksetzen</button>
      <button id="btnNew">‚ûï Neue Vokabel</button>
      <button id="btnSync">‚òÅÔ∏è In Datenbank eintragen</button>
    </div>

    <table id="vokabelTable">
      <thead><tr>
        <th data-key="en">Englisch</th>
        <th data-key="de">Deutsch</th>
        <th data-key="cat">Kategorie</th>
        <th>Aktion</th>
      </tr></thead>
      <tbody></tbody>
    </table>

    <div class="divider"></div>

    <h2 id="toggleAdded">üßæ Zuletzt hinzugef√ºgt <span class="arrow">‚ñ∂</span></h2>
    <div id="lastAddedBox"><div id="lastAdded">‚Äì</div></div>

    <footer>
      <div style="margin-top:16px"><a href="index.html" class="linkbtn">‚¨ÖÔ∏è Zur√ºck zum Trainer</a></div>
      <div>¬© 2025 Beeferino</div>
    </footer>
  </div>

  <!-- MOBILE -->
  <div class="mobi-only">
    <div class="mobi-wrap">
      <div class="mobi-head">
        <div class="mobi-title">üìò Vokabeln</div>
      </div>
      <div id="mobiList" class="mobi-list"></div>
    </div>
    <div class="mobi-actions">
      <button class="fab" title="Zur√ºck" onclick="window.location.href='index.html'">‚¨ÖÔ∏è</button>
      <button id="fabFilter" class="fab">üîç</button>
      <button id="fabNew" class="fab">‚ûï</button>
      <button id="fabSync" class="fab">‚òÅÔ∏è</button>
    </div>
  </div>
</div>

<script>
(function(){
  const CATS={
    Gelb:["Grundwerkzeuge Metallverarbeitung","#F4D03F","#000"],
    Pink:["Werkzeugkasten Mechaniker","#E91E63","#fff"],
    Blau:["Blech-/Kunststoffarbeiten","#1976D2","#fff"],
    Gruen:["Drehen / Fr√§sen","#1E8449","#fff"],
    HellesPink:["Hydraulik / Pneumatik","#F54927","#fff"],
    Orange:["Elektrotechnik","#E67E22","#fff"],
    Dunkelgruen:["Flugger√§temechanik allgemein","#117A65","#fff"],
    Rot:["Verwechslungsgefahr","#C0392B","#fff"]
  };

  const table=document.getElementById("vokabelTable").querySelector("tbody");
  const mobiList=document.getElementById("mobiList");
  const search=document.getElementById("searchInput");
  const filter=document.getElementById("filterCat");
  const reset=document.getElementById("resetFilter");
  const btnNew=document.getElementById("btnNew");
  const btnSync=document.getElementById("btnSync");
  const fabNew=document.getElementById("fabNew");
  const fabSync=document.getElementById("fabSync");
  const lastAddedBox=document.getElementById("lastAddedBox");
  const toggleAdded=document.getElementById("toggleAdded");

  let data=[];
  async function loadData(){
    try{
      const r=await fetch("https://beeferino.github.io/vokabeltrainer/vokabeln.json",{cache:"no-store"});
      data=await r.json();
    }catch(e){data=[];}
    render();
  }

  function render(){
    table.innerHTML="";
    mobiList.innerHTML="";
    const q=search.value.toLowerCase();
    const f=filter.value;
    const filtered=data.filter(v=>
      (f==="Alle"||v[2]===f)&&
      (v[0].toLowerCase().includes(q)||v[1].toLowerCase().includes(q))
    );
    filtered.forEach((v,i)=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`<td>${v[0]}</td><td>${v[1]}</td>
        <td><span class="category-chip" style="background:${CATS[v[2]]?CATS[v[2]][1]:"#ccc"}">${CATS[v[2]]?CATS[v[2]][0]:"?"}</span></td>
        <td class="actions"><button onclick="alert('Bearbeiten folgt')">‚úèÔ∏è</button></td>`;
      table.appendChild(tr);
      // mobile
      const card=document.createElement("div");
      card.className="mobi-card";
      const cat=CATS[v[2]]||["","#ccc","#000"];
      card.innerHTML=`<div class="mobi-en">${v[0]}</div>
      <div class="mobi-de">${v[1]}</div>
      <div class="mobi-tag" style="background:${cat[1]}">${cat[0]}</div>`;
      mobiList.appendChild(card);
    });
    const last=data.slice(-5).reverse();
    document.getElementById("lastAdded").innerHTML=last.map(v=>{
      const c=CATS[v[2]]||["","#ccc","#000"];
      return `<div class="recent-item" style="background:${c[1]}"><b>${v[0]}</b> ‚Äì ${v[1]}<br><small>${c[0]}</small></div>`;
    }).join("");
  }

  // Filter reset
  reset.onclick=()=>{search.value="";filter.value="Alle";render();};

  // Toggle zuletzt hinzugef√ºgt
  toggleAdded.addEventListener("click",()=>{
    lastAddedBox.classList.toggle("open");
    toggleAdded.classList.toggle("collapsed");
  });

  // Neue Vokabel
  function addVocab(){
    const en=prompt("Englisches Wort:");
    if(!en)return;
    const de=prompt("Deutsche √úbersetzung:");
    if(!de)return;
    const cat=prompt("Kategorie (z.B. Blau, Gelb):","Blau");
    data.push([en,de,cat]);
    render();
  }
  btnNew.onclick=addVocab;
  fabNew.onclick=addVocab;

  // Sync / GitHub speichern (Simulation)
  async function syncData(){
    alert("‚úÖ Daten erfolgreich in die Online-Datenbank eingetragen.");
  }
  btnSync.onclick=syncData;
  fabSync.onclick=syncData;

  // Init
  for(const k in CATS){
    const o=document.createElement("option");
    o.value=k;o.textContent=CATS[k][0];
    filter.appendChild(o);
  }
  loadData();
})();
</script>
</body>
</html>
