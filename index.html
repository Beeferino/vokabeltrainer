<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¯ Vokabeltrainer</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #fafafa;
  color: #333;
  text-align: center;
  padding: 20px;
}
.app { max-width: 600px; margin: 0 auto; }
h1 { margin-bottom: 10px; }

.kachel {
  background: #1976D2;
  color: white;
  padding: 10px;
  margin: 8px 0;
  border-radius: 10px;
  cursor: pointer;
}
.kachel:hover { background: #145A8D; }

.card {
  perspective: 1000px;
  position: relative;
  width: 100%;
  min-height: 200px;
  margin-top: 15px;
}
.card-inner {
  position: relative;
  width: 100%;
  transform-style: preserve-3d;
  transition: transform 0.6s;
}
.card.flipped .card-inner {
  transform: rotateY(180deg);
}
.card-front, .card-back {
  backface-visibility: hidden;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  min-height: 200px;
  border-radius: 12px;
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 15px;
  box-sizing: border-box;
}
.card-back {
  transform: rotateY(180deg);
  background: #f5f5f5;
}
.feedback { margin-top: 10px; min-height: 24px; }
.correct { box-shadow: 0 0 10px #4caf50; }
.wrong { box-shadow: 0 0 10px #f44336; }
</style>
</head>
<body>
<div class="app">
  <h1>ğŸ¯ Vokabeltrainer</h1>

  <div class="controls">
    <label>Kategorie:
      <select id="category">
        <option value="Alle">Alle (bunt gemischt)</option>
        <option value="Gelb">Grundwerkzeuge Metallverarbeitung</option>
        <option value="Pink">Werkzeugkasten Mechaniker</option>
      </select>
    </label>
    <label>Modus:
      <select id="mode">
        <option value="toGerman">Englisch â†’ Deutsch</option>
        <option value="toEnglish">Deutsch â†’ Englisch</option>
        <option value="mixed">Gemischt</option>
      </select>
    </label>
  </div>

  <div class="functions">
    <div class="kachel" id="learnBtn">âœï¸ Vokabel-Abfrage starten</div>
    <div class="kachel" id="cardsBtn">ğŸ§  Karteikarten starten</div>
  </div>

  <div class="progress" id="progress" style="display:block;">Frage 1/15 | Fehler: 0</div>

  <div id="trainer" style="display:block;">
    <div class="card" id="card">
      <div class="card-inner">
        <div class="card-front">
          <div id="word" class="word"></div>
          <input id="answerInput" type="text" placeholder="Ãœbersetzung eingeben..." style="display:none;">
          <div id="feedback" class="feedback"></div>
          <div id="cardButtons">
            <button id="rightBtn">Richtig</button>
            <button id="wrongBtn">Falsch</button>
            <button id="skipBtn">Ãœberspringen</button>
          </div>
        </div>
        <div class="card-back">
          <div id="correctAnswer" style="font-size:1.2rem;text-align:center;padding-top:40px;">âœ… Richtige Antwort</div>
        </div>
      </div>
    </div>
    <button id="restartBtn" style="margin-top:10px;">ğŸ”„ Neustart</button>
  </div>

  <div id="result" style="display:none;" class="card"></div>
</div>

<script>
(() => {
  const COLOR_MAP={"Gelb":"#F4D03F","Pink":"#E91E63"};
  const CATEGORY_NAMES={"Gelb":"Grundwerkzeuge Metallverarbeitung","Pink":"Werkzeugkasten Mechaniker"};

  const catSel=document.getElementById("category"),
        modeSel=document.getElementById("mode"),
        learnBtn=document.getElementById("learnBtn"),
        cardsBtn=document.getElementById("cardsBtn"),
        restartBtn=document.getElementById("restartBtn"),
        wordDiv=document.getElementById("word"),
        feedback=document.getElementById("feedback"),
        rightBtn=document.getElementById("rightBtn"),
        wrongBtn=document.getElementById("wrongBtn"),
        skipBtn=document.getElementById("skipBtn"),
        progress=document.getElementById("progress"),
        trainer=document.getElementById("trainer"),
        result=document.getElementById("result"),
        answerInput=document.getElementById("answerInput"),
        card=document.getElementById("card");

  let list=[
    ["file","Feile","Gelb"],
    ["hammer","Hammer","Pink"],
    ["screwdriver","Schraubendreher","Pink"],
    ["saw","SÃ¤ge","Gelb"]
  ];
  let round=[],index=0,errors=[],skipped=[],mode="mixed",gameMode="cards",isTrap=false;

  function flash(cls){ card.classList.add(cls); setTimeout(()=>card.classList.remove(cls),400); }
  function updateProgress(){ progress.textContent=`Frage ${index+1}/${round.length} | Fehler: ${errors.length}`; }

  function startRound(selectedMode,type){
    mode=selectedMode; gameMode=type;
    const shuffled=list.slice().sort(()=>Math.random()-0.5);
    round=shuffled.slice(0,Math.min(15,shuffled.length));
    index=0; errors=[]; skipped=[];
    result.style.display="none"; trainer.style.display="block"; feedback.textContent="";
    updateProgress(); showNext();
  }

  function getRandomWrongAnswer(correct){
    const pool=list.map(v=>v[1]);
    let w;
    do{ w=pool[Math.floor(Math.random()*pool.length)]||correct; }while(w===correct);
    return w;
  }

  function showAnswerAndFlip(correctAnswer, correct){
    const cardEl=document.getElementById("card");
    const back=document.getElementById("correctAnswer");
    back.innerHTML = correct
      ? `âœ… <b>${correctAnswer}</b>`
      : `âŒ Richtige Antwort: <b>${correctAnswer}</b>`;
    cardEl.classList.add("flipped");
    flash(correct ? "correct" : "wrong");
    setTimeout(()=>{
      cardEl.classList.remove("flipped");
      if(!correct) errors.push([round[index][0], round[index][1]]);
      index++;
      setTimeout(showNext, 300);
    }, 2000); // nach 2 Sekunden nÃ¤chste Karte
  }

  function showNext(){
    if(index>=round.length){
      trainer.style.display="none"; progress.style.display="none";
      let html=`<h3>Runde beendet</h3>`;
      if(errors.length===0) html+="<p>Keine Fehler ğŸ‰</p>";
      else { html+=`<p>${errors.length} Fehler:</p><ul>`; errors.forEach(([q,a])=>html+=`<li>${q} â†’ ${a}</li>`); html+="</ul>"; }
      html+="<button onclick='location.reload()'>ğŸ”„ Neue Runde</button>";
      result.innerHTML=html; result.style.display="block"; return;
    }

    updateProgress();
    const [en,de,cat]=round[index];
    let ask,answer;
    if(mode==="toGerman"){ask=en;answer=de;}
    else if(mode==="toEnglish"){ask=de;answer=en;}
    else{ if(Math.random()<0.5){ask=en;answer=de;} else {ask=de;answer=en;} }

    const catColor=COLOR_MAP[cat]||"#ccc";
    const catName=CATEGORY_NAMES[cat]||cat;
    wordDiv.innerHTML=`<div style='display:inline-block;padding:6px 12px;border-radius:12px;background:${catColor};color:#fff;'>${catName}</div><br><br><b>${ask}</b>`;
    feedback.textContent="";

    if(gameMode==="cards"){
      answerInput.style.display="none"; rightBtn.style.display="inline-block"; wrongBtn.style.display="inline-block"; skipBtn.style.display="inline-block";
      isTrap=Math.random()<0.3;
      const currentAnswer=isTrap?getRandomWrongAnswer(answer):answer;
      feedback.innerHTML=`ğŸ’¡ <b>${currentAnswer}</b>`;
      rightBtn.onclick=function(){ const correct=!isTrap; showAnswerAndFlip(answer, correct); };
      wrongBtn.onclick=function(){ const correct=isTrap; showAnswerAndFlip(answer, correct); };
      skipBtn.onclick=function(){ skipped.push([en,de,cat]); index++; showNext(); };
    }
  }

  learnBtn.onclick=()=>startRound(modeSel.value,"learn");
  cardsBtn.onclick=()=>startRound(modeSel.value,"cards");
  restartBtn.onclick=()=>location.reload();

  startRound("mixed","cards"); // zum Testen direkt starten
})();
</script>
</body>
</html>
