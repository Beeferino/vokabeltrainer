<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vokabeltrainer – Beeferino</title>
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#2563eb">

<style>
:root{
  --blue:#2563eb;--blue2:#1d4ed8;--ink:#0f172a;
  --glass:rgba(255,255,255,.88);
  --ok:#22c55e;--bad:#ef4444;--muted:#9ca3af
}
*{box-sizing:border-box}
body{
  margin:0;font-family:Inter,system-ui,sans-serif;
  background:linear-gradient(145deg,#eef4ff,#dbeafe);color:var(--ink)
}
body.dark{background:linear-gradient(145deg,#1e293b,#0f172a);color:#f8fafc}
body.dark .app{background:rgba(30,41,59,.85)}
.app{
  max-width:1000px;margin:28px auto;padding:22px;background:var(--glass);
  border-radius:22px;box-shadow:0 10px 32px rgba(0,0,0,.10);backdrop-filter:blur(8px)
}
h1{margin:0;text-align:center;font-size:2rem;font-weight:800;color:#1e3a8a}
body.dark h1{color:#93c5fd}
.hr{width:160px;height:4px;background:var(--blue);border-radius:4px;margin:10px auto 20px}
.controls,.functions,.toolbar{display:flex;flex-wrap:wrap;justify-content:center;gap:12px}
select,.tbtn{
  padding:8px 12px;border:1px solid #d1d5db;border-radius:10px;font-size:1rem;background:#fff
}
.kachel{
  flex:1 1 240px;text-align:center;background:var(--blue);color:#fff;padding:14px 18px;border-radius:14px;
  font-weight:700;cursor:pointer;box-shadow:0 6px 16px rgba(37,99,235,.25);transition:transform .15s,background .15s
}
.kachel:hover{transform:translateY(-1px);background:var(--blue2)}
.progress{text-align:center;font-weight:700;margin:8px 0 4px}
.subnote{text-align:center;font-size:.95rem;color:#334155;margin:-2px 0 12px}
.subnote b{font-weight:800;color:#1e3a8a}
.goalbar{width:90%;max-width:560px;height:10px;border-radius:999px;background:#e5e7eb;margin:8px auto 0;overflow:hidden}
.goalbar>div{height:100%;width:0;background:linear-gradient(90deg,#34d399,#10b981);transition:width .4s}
#stage{
  display:none;margin-top:14px;padding:28px;border-radius:20px;background:rgba(255,255,255,.95);
  box-shadow:inset 0 0 10px rgba(0,0,0,.05);text-align:center
}
.chip{display:inline-block;font-weight:800;padding:8px 14px;border-radius:999px;margin-bottom:10px}
.word{font-size:1.9rem;font-weight:800;margin:8px 0 6px}
.offer{font-size:1.1rem;color:#1f2937;margin:6px 0 12px;min-height:1.3em}
.btnrow{display:flex;justify-content:center;gap:12px;flex-wrap:wrap}
.btn{border:none;border-radius:12px;padding:10px 20px;font-weight:700;font-size:1rem;cursor:pointer}
.ok{background:var(--ok);color:#fff}
.bad{background:var(--bad);color:#fff}
.skip{background:var(--muted);color:#fff}
.inprow{display:none;gap:8px;justify-content:center;margin-top:12px}
.inprow input{width:60%;min-width:260px;padding:10px 14px;border:1px solid #d1d5db;border-radius:12px;font-size:1rem}
.inprow button{background:var(--blue);color:#fff;border:none;border-radius:12px;padding:10px 16px;font-weight:700}

/* ==== Flashcard Grafik ==== */
.flashcard {
  width:min(420px,90%);
  height:260px;
  margin:0 auto 20px;
  perspective:1000px;
  position:relative;
}
.flashcard-inner {
  position:absolute;
  width:100%;height:100%;
  transform-style:preserve-3d;
  transition:transform .8s ease;
  border-radius:18px;
  box-shadow:0 8px 28px rgba(0,0,0,.15);
  background:linear-gradient(145deg,#fff,#f8faff);
}
.flashcard.flip .flashcard-inner{transform:rotateY(180deg);}
.flashcard-face{
  position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:18px;
  display:flex;align-items:center;justify-content:center;font-size:1.6rem;font-weight:800;padding:20px
}
.flashcard-front{
  background:linear-gradient(135deg,#dbeafe,#eff6ff);
  color:#1e3a8a;
}
.flashcard-back{
  background:linear-gradient(135deg,#dcfce7,#bbf7d0);
  color:#064e3b;
  transform:rotateY(180deg);
}
</style>
</head>

<body>
<div class="app">
  <h1>🎯 Vokabeltrainer</h1>
  <div class="hr"></div>

  <div class="controls">
    <label>Kategorie:<select id="selCat"><option value="Alle">Alle (bunt gemischt)</option></select></label>
    <label>Modus:
      <select id="selMode">
        <option value="mixed">Gemischt</option>
        <option value="toGerman">Englisch → Deutsch</option>
        <option value="toEnglish">Deutsch → Englisch</option>
      </select>
    </label>
  </div>

  <div class="functions">
    <div id="btnLearn" class="kachel">✍️ Vokabel-Abfrage starten</div>
    <div id="btnCards" class="kachel">🧠 Karteikarten<br><small><i>Mitdenker Edition</i></small></div>
  </div>

  <div id="progress" class="progress">Bereit.</div>
  <div id="startNote" class="subnote">
    Wähle zuerst einen <b>Übungsmodus</b> und klicke auf <b>„Vokabel-Abfrage starten“</b> oder <b>„Karteikarten“</b>.
  </div>

  <section id="stage">
    <div id="chip" class="chip">–</div>

    <!-- Neue 3D-Karte -->
    <div id="flashcard" class="flashcard" style="display:none;">
      <div class="flashcard-inner">
        <div id="cardFront" class="flashcard-face flashcard-front"></div>
        <div id="cardBack" class="flashcard-face flashcard-back"></div>
      </div>
    </div>

    <div id="q" class="word" style="display:none;">–</div>
    <div id="offer" class="offer"></div>

    <div id="rowButtons" class="btnrow">
      <button id="btnRight" class="btn ok">Richtig</button>
      <button id="btnDec" class="btn bad">Täuschung erkannt</button>
    </div>
  </section>

  <div class="foot">© 2025 Beeferino</div>
</div>

<script>
(function(){
const CATS={
  Gelb:["Grundwerkzeuge Metallverarbeitung","#F4D03F","#000"],
  Pink:["Werkzeugkasten Mechaniker","#E91E63","#fff"],
  Blau:["Blech- / Kunststoffarbeiten","#1976D2","#fff"],
  Gruen:["Drehen / Fräsen","#1E8449","#fff"]
};
const el=id=>document.getElementById(id);
const selCat=el("selCat"),selMode=el("selMode");
const btnLearn=el("btnLearn"),btnCards=el("btnCards");
const stage=el("stage"),flashcard=el("flashcard");
const cardFront=el("cardFront"),cardBack=el("cardBack");
const q=el("q"),offer=el("offer"),chip=el("chip");
const btnRight=el("btnRight"),btnDec=el("btnDec");

let data=[
  ["vice","Schraubstock","Pink"],
  ["saw","Säge","Gelb"],
  ["ruler","Maßstab","Gelb"],
  ["pliers","Zange","Blau"],
  ["measuring tape","Maßband","Blau"]
];

let i=0,round=[],flipTimer=null,correct="",trap=false;

function shuffle(a){for(let j=a.length-1;j>0;j--){const r=Math.floor(Math.random()*(j+1));[a[j],a[r]]=[a[r],a[j]];}}
function pick(list){return selCat.value==="Alle"?list.slice():list.filter(v=>v[2]===selCat.value);}
function next(){
  if(i>=round.length){alert("🎉 Runde beendet!");flashcard.style.display="none";q.style.display="none";return;}
  const [en,de,cat]=round[i];
  const catMeta=CATS[cat]||["Kategorie","#ddd","#000"];
  chip.textContent=catMeta[0];
  chip.style.background=catMeta[1];chip.style.color=catMeta[2];
  const askEN=selMode.value==="toGerman"?true:selMode.value==="toEnglish"?false:Math.random()<0.5;
  const question=askEN?en:de;
  const answer=askEN?de:en;
  correct=answer;
  q.style.display="none";
  flashcard.style.display="block";
  flashcard.classList.remove("flip");
  cardFront.textContent=question;
  cardBack.textContent=answer;
  clearTimeout(flipTimer);
  flipTimer=setTimeout(()=>flashcard.classList.add("flip"),3000);
}
btnCards.onclick=()=>{
  round=pick(data);shuffle(round);i=0;
  stage.style.display="block";
  next();
};
btnRight.onclick=()=>{i++;next();};
btnDec.onclick=()=>{i++;next();};
btnLearn.onclick=()=>{alert("Der grafische Modus betrifft nur die Karteikarten – nutze 🧠 Karteikarten.");};
})();
</script>
</body>
</html>
